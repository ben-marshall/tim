<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>T.I.M | ISA Specification: Status Register</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
<style type="text/css">
#nav-tree {
    background-image : none;
    background-color : white;
}
#nav-tree .selected{
    background-image : none;
    background-color : #222222;
    color : white;
}
#nav-sync{
    display:none;
}
#nav-tree .item{
    margin: 7px;
}
#nav-tree .label{
    font-size : 14px;
}
#MSearchBox{
    display:none;
}
.ui-resizable-e{
    background-color: silver;
    background-image: none;
}
</style>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="">
  <td id="projectlogo"><img alt="Logo" height="55px" style="padding:3px;" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">T.I.M | ISA Specification
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('registers-sp-sr.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Status Register </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Address: <code>0100</code>, Memonic: <code>SR</code></p>
<h3>Functionality:</h3>
<p>Stores various status bits each indicating different pieces of information. This register cannot be written too in the normal way. Its value may only be queried using the <a href="TEST.html">TEST</a> instruction and coppied to a general purpose register using <a href="MOVSR.html">MOVSR</a>.</p>
<p>The following pieces of information are stored in the status register and are updated automatically:</p>
<table class="doxtable">
<tr>
<th>Bit </th><th>Description  </th></tr>
<tr>
<td>0 </td><td>Zero Flag. Set if the result of the previous operation was zero. </td></tr>
<tr>
<td>1 </td><td>Carry Flag. Set if the result of the previous operation did not fit in the register. </td></tr>
<tr>
<td>2 </td><td>Negative Flag. Set if the result of the previous operation was negative. </td></tr>
<tr>
<td>3 </td><td>Overflow Flag. Indicates the result of an arithmetic operation did not fit in the target register. </td></tr>
<tr>
<td>4 </td><td>Undefined / Reserved. </td></tr>
<tr>
<td>5 </td><td>Interrupt Servicing Flag. Set high if the currently executing function is handling an interrupt. </td></tr>
<tr>
<td>6 </td><td>Supervisor Flag. When set all operations are valid. When unset certain memory regions are not accessable. </td></tr>
<tr>
<td>7 </td><td>Undefined / Reserved. </td></tr>
</table>
<p>This register is 8 bits wide.</p>
<h3>Access</h3>
<p>This can be read by:</p>
<ul>
<li>TEST</li>
<li>MOVSR</li>
</ul>
<p>The only permissable write operations on the status register are performed on the Supervisor and Interrupt servicing flag. Both flags may only be written too when the supervisor flag is set. Otherwise, the write is treated as a NOP.</p>
<p>To perform the write, A bit mask must be constructed in a general purpose register, with the desired bit values set or unset. The <a href="MOVRS.html">MOVRS</a> instruction is then used to move the mask into the status register. Only bits corresponding to the supervisor and interrupt servicing flag are cared about.</p>
<p>To avoid accidentally setting or unsetting the supervisor flag and the interrupt service flag, the least significant bit is used to select between the interrupt flag and the supervisor flag. When zero, the interrupt flag is set, when one, the supervisor flag is written too. The other mask bits can take any value and will have no effect.</p>
<p>The example below shows how to set and then un-set the interrupt servicing flag.</p>
<div class="fragment"><div class="line">0xAB0000 | MOVI R0 0b00100000 ; Set the mask bits</div>
<div class="line">0xAB0004 | MOVRS R0 SR ; Move the mask into the test <span class="keyword">register</span>.</div>
<div class="line">...</div>
<div class="line">... ; Interrupt handling occurs here.</div>
<div class="line">...</div>
<div class="line">0xAB0502 | MOVI R0 0b00000000 ; Set the mask bits, <span class="keyword">this</span> time a zero</div>
<div class="line">0xAB0506 | MOVRS R0 SR ; Move the mask and unset bit 5</div>
</div><!-- fragment --><p>Note that whenever a zero is written to the Interrupt servicing flag, this is taken to mean that the interrupt has been completely serviced. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
  </ul>
</div>
</body>
</html>
